{% extends "base.html" %}
{% block content %}
<h2>Substitution Requests</h2>
<table class="table">
  <thead>
    <tr>
      <th>Date</th>
      <th>Activity</th>
      <th>Requester</th>
      <th>Substitute</th>
      <th>Status</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
  {% for req in requests %}
    <tr>
      <td>{{ req.duty_date }}</td>
      <td>{{ req.activity }}</td>
      <td>{{ req.requester_name }}</td>
      <td>{{ req.substitute_name }}</td>
      <td>{{ req.status }}</td>
      <td>
        {% if req.status == 'pending' %}
          <form method="post" style="display:inline;">
            <input type="hidden" name="request_id" value="{{ req.id }}">
            <button type="submit" name="action" value="approve" class="btn btn-sm btn-success">Approve</button>
          </form>
          <form method="post" style="display:inline;">
            <input type="hidden" name="request_id" value="{{ req.id }}">
            <button type="submit" name="action" value="deny" class="btn btn-sm btn-danger">Deny</button>
          </form>
        {% else %}
          N/A
        {% endif %}
      </td>
    </tr>
  {% endfor %}
  </tbody>
</table>
{% endblock %}
